CC= gcc
CFLAGS= -Wall -W -g 
HEAD= $(wildcard *.h)
SRC= $(wildcard *.c)


.PHONY: all

all:exemple main switch join join-main create-many create-many-recursive switch-many switch-many-join fibonacci test_spin test_prio 
#test_sig

exemple: exemple.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

test_sig: test_sig.o fifo.o thread.o signal_thread.o
	$(CC) $(CFLAGS) $^ -o $@

test_pr: test_pr.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

switch: switch.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

main: main.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

join: join.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

join-main: join-main.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

create-many: create-many.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

create-many-recursive: create-many-recursive.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@


switch-many: switch-many.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

switch-many-join: switch-many-join.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

fibonacci: fibonacci.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

test_spin: test_spin.o fifo.o thread.o spinlock.o
	$(CC) $(CFLAGS) $^ -o $@

test_prio: test_prio.o fifo.o thread.o
	$(CC) $(CFLAGS) $^ -o $@

%.o: %.c %.h
	$(CC) $(CFLAGS) -c $< -o $@

doxygen:
	@doxygen Doxyfile

clean:
	rm -f exemple main switch join join-main create-many create-many-recursive switch-many switch-many-join fibonacci test_spin test_prio
	rm -f *~
	rm -f *.o
	rm -f \#*