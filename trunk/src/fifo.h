#ifndef _FIFO_H_
#define _FIFO_H_
#include "thread.h"
#include <assert.h>

/** 
 * structure that will be stored in thread fifo 
 */
struct element {
  struct thread_t* data;
  struct element* next;
  struct element* prev;
};

/** 
 * fifo structure : pointers on the head and the tail
 */
struct fifo{
  struct element* head;
  struct element* tail;
  unsigned long size;
};

/* crée un élément à partir d'un thread*/
struct element* create_element( struct thread_t* t);

/* libère un élément */
void free_element(struct element* elm);

/* vérifie si la fifo est vide*/
int fifo_isempty(struct fifo* f);

/* crée une nouvelle fifo */
struct fifo* fifo_create();

/* libère les éléments de la fifo*/
void fifo_free(struct fifo* f) ;
 
/* libère la fifo*/
void fifo_kill(struct fifo* f);

/* retourne le thread qui se trouve à la tête de la fifo */
struct thread_t* fifo_gethead(struct fifo* f);

/* cherche un thread dans la fifo à partir de son identifiant */
struct thread_t* fifo_findthread (struct fifo* f, int id);

/* ajoute un thread à la fifo */
void fifo_addthread(struct fifo* f, struct thread_t* t) ;

/*supprime un élément de la fifo */
void fifo_remove_element(struct fifo* f, struct element* elm) ;

/* supprime l'élément qui se trouve à la tête de la fifo */
struct thread_t* fifo_remove_head(struct fifo* f) ;

/*supprime un thread de la fifo*/
void fifo_remove_thread (struct fifo* f, int id) ;

void fifo_addhead(struct fifo* f, struct thread_t *t);


#endif /* __FIFO_H__ */
