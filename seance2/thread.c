#include "thread.h"
#include <ucontext.h>

struct thread_t{
  ucontext_t uc;
  
};


thread_t thread_self(void){
  thread_t t;
  t.uc.uc_stack.ss_size = 64*1024;
  t.uc.uc_stack.ss_sp = malloc(uc.uc_stack.ss_size);
  t.uc.uc_link = NULL;

  return t;
}

int thread_create(thread_t *newthread, void *(*func)(void *), void *funcarg){
  
  makecontext(&(newthread->uc),(void(*)(void)) func, 1, funcarg);

}
